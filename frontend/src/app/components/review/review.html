<div class="review-container">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading">
    <div class="spinner"></div>
    <p>Loading reviews...</p>
  </div>

  <!-- No Reviews / Complete State -->
  <div *ngIf="!isLoading && isComplete" class="complete">
    <div class="complete-icon">âœ“</div>
    <h2>All Done!</h2>
    <p *ngIf="reviews.length === 0">No reviews due right now. Great job!</p>
    <p *ngIf="reviews.length > 0">You've completed {{ reviews.length }} reviews!</p>
    <a routerLink="/dashboard" class="btn btn-primary">Back to Dashboard</a>
  </div>

  <!-- Review Session -->
  <div *ngIf="!isLoading && !isComplete && currentReview" class="review-session">
    <!-- Progress Bar -->
    <div class="progress-bar">
      <div class="progress-fill" [style.width.%]="progress"></div>
    </div>
    <div class="progress-text">
      {{ currentIndex + 1 }} / {{ reviews.length }}
    </div>

    <!-- Katakana Character Display -->
    <div class="character-display" [class.correct]="showFeedback && isCorrect" [class.incorrect]="showFeedback && !isCorrect">
      <div class="character">{{ currentReview.character }}</div>
    </div>

    <!-- Answer Input -->
    <div class="answer-section">
      <label for="answer">Enter the romaji:</label>
      <input
        #answerInput
        type="text"
        id="answer"
        [(ngModel)]="userAnswer"
        [class.correct]="showFeedback && isCorrect"
        [class.incorrect]="showFeedback && !isCorrect"
        placeholder="Type your answer..."
        autofocus
        autocomplete="off"
      />
      <button
        class="btn btn-primary"
        (click)="submitAnswer()"
        [disabled]="!userAnswer.trim()"
        *ngIf="!showFeedback"
      >
        Submit
      </button>
      <!-- Feedback below input -->
      <div *ngIf="showFeedback && !isCorrect" class="input-feedback-text">
        Incorrect. The answer is: <strong>{{ currentReview.romaji }}</strong>
      </div>
      <div *ngIf="showFeedback" class="hint">
        Press Enter to continue
      </div>
    </div>
  </div>
</div>
