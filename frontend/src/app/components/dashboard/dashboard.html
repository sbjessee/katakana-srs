<div class="dashboard-container">
  <h1>Dashboard</h1>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading">
    <div class="spinner"></div>
    <p>Loading dashboard...</p>
  </div>

  <!-- Dashboard Content -->
  <div *ngIf="!isLoading && stats" class="dashboard-content">
    <!-- Hero Sections Grid -->
    <div class="hero-grid">
      <!-- Lessons Section -->
      <div class="hero-section lessons" [class.available]="stats.lessons_available > 0" [class.empty]="stats.lessons_available === 0">
        <div *ngIf="stats.lessons_available > 0">
          <h2>{{ stats.lessons_available }} Lessons Available!</h2>
          <p>Learn new katakana characters</p>
          <a routerLink="/lessons" class="btn btn-lg btn-primary">Start Lesson</a>
        </div>
        <div *ngIf="stats.lessons_available === 0">
          <h2>No Lessons Available</h2>
          <p>You've completed all lessons!</p>
        </div>
      </div>

      <!-- Reviews Section -->
      <div class="hero-section reviews" [class.available]="stats.reviews_due_now > 0" [class.empty]="stats.reviews_due_now === 0">
        <div *ngIf="stats.reviews_due_now > 0">
          <h2>{{ stats.reviews_due_now }} Reviews Available!</h2>
          <p>Practice what you've learned</p>
          <a routerLink="/review" class="btn btn-lg btn-primary">Start Reviews</a>
        </div>
        <div *ngIf="stats.reviews_due_now === 0">
          <h2>0 Reviews Left</h2>
          <p>You're done for now!</p>
        </div>
      </div>
    </div>

    <!-- Stats Grid -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-value">{{ stats.total_items }}</div>
        <div class="stat-label">Total Items</div>
      </div>

      <div class="stat-card">
        <div class="stat-value">{{ stats.reviews_due_today }}</div>
        <div class="stat-label">Due Today</div>
      </div>

      <div class="stat-card">
        <div class="stat-value">{{ stats.accuracy_rate }}%</div>
        <div class="stat-label">Accuracy</div>
      </div>
    </div>

    <!-- SRS Stage Distribution -->
    <div class="section">
      <h3>SRS Stage Distribution</h3>
      <div class="stage-distribution">
        <div *ngFor="let stage of getStageEntries()" class="stage-item">
          <div class="stage-bar">
            <div
              class="stage-fill"
              [style.width.%]="(stage.count / stats.total_items) * 100"
              [style.background-color]="stage.color"
            ></div>
          </div>
          <div class="stage-info">
            <span class="stage-name" [style.color]="stage.color">{{ stage.name }}</span>
            <span class="stage-count">{{ stage.count }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Upcoming Reviews -->
    <div class="section" *ngIf="upcomingReviews.length > 0">
      <h3>Upcoming Reviews (Next 7 Days)</h3>
      <div class="upcoming-list">
        <div *ngFor="let upcoming of upcomingReviews" class="upcoming-item">
          <span class="upcoming-date">{{ formatDate(upcoming.date) }}</span>
          <span class="upcoming-count">{{ upcoming.count }} reviews</span>
        </div>
      </div>
    </div>
  </div>
</div>
